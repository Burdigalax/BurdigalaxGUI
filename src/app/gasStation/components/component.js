import React, { Fragment } from "react";
import {
  Action,
  Buy,
  BuyButton,
  FuelLevel,
  Informations,
  InfoTitle,
  Interface,
  Line,
  List,
  SelectGas,
  Warning,
  Error,
  WrapperGauge,
  Column,
  WrapperPayment
} from "./styles";
import Header from "./Header";
import GasContainer from "./Gas";
import PaymentContainer from "./Payment";
import Gauge from "./Gauge";
import { BTN_VARIANT } from "../../common/components/BurdiButton/constants";
import CloseShop from "./CloseShop";

const GasStation = ({
  gasesIds = [],
  hasGasSelected = false,
  onBuy,
  stopBuy,
  gaugeValue = 0,
  isOnBuy = false,
  hasBuyDisabled = false,
  colorSelected,
  wording: {
    selectGas,
    informations,
    informationsList = [],
    plug,
    unplug,
    add
  },
  tankCapacity,
  unit = "L",
  type = "fuel",
  isStationOpen = true,
  errorTitle,
  errorMessage,
  redColor,
  backgroundHeaderColor,
  bgColor,
  selectGasBackgroundColor,
  color
}) => {
  return (
    <Interface>
      <Header hasCloseButton />
      <SelectGas
        hasBorderRadius={!backgroundHeaderColor}
        backgroundColor={selectGasBackgroundColor}
      >
        {gasesIds.map(id => (
          <GasContainer id={id} key={`Gas-${id}`} />
        ))}
      </SelectGas>
      <Action bgColor={bgColor} color={color}>
        {isStationOpen ? (
          <Fragment>
            {!hasGasSelected && <Warning> {selectGas} </Warning>}
            <Line>
              <WrapperPayment>
                <PaymentContainer />
              </WrapperPayment>
              <FuelLevel>
                <WrapperGauge>
                  <Gauge
                    value={gaugeValue}
                    maxValue={tankCapacity}
                    bgColor={colorSelected}
                    type={type}
                  />
                </WrapperGauge>
                {gaugeValue}
                {unit} / {tankCapacity}
                {unit}
              </FuelLevel>
              <Column>
                {!hasGasSelected ? (
                  <Informations>
                    <InfoTitle>{informations}</InfoTitle>
                    <List>
                      {informationsList.map((info, index) => (
                        <li key={`info-${index}`}>{info}</li>
                      ))}
                    </List>
                  </Informations>
                ) : (
                  <Buy>
                    {type === "fuel" ? (
                      <BuyButton
                        label={add}
                        variant={BTN_VARIANT.primary}
                        iconLeftSize={80}
                        disabled={hasBuyDisabled}
                        color={colorSelected}
                        onMouseDown={onBuy}
                        onMouseUp={isOnBuy ? stopBuy : null}
                        onMouseOut={isOnBuy ? stopBuy : null}
                        iconLeftUrl={
                          isOnBuy
                            ? "data:image/svg+xml,%3Csvg version='1.1' id='Calque_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='674.589px' height='363.824px' viewBox='-30.999 63.683 674.589 363.824' enable-background='new -30.999 63.683 674.589 363.824' xml:space='preserve'%3E%3Cpath d='M9.039,178.383l138.336-33.43c4.29-1.043,8.752-1.188,13.1-0.429l53.239,9.194l11.517-49.926l-72.99-11.684 c-1.839-0.296-3.723-0.223-5.53,0.216L-3.016,128.525c-3.625,0.875-6.755,3.156-8.7,6.34s-2.547,7.008-1.669,10.637l5.469,22.524 C-6.091,175.561,1.497,180.199,9.039,178.383z'/%3E%3Cpath d='M235.423,157.459c2.079,0.36,3.972,1.427,5.352,3.021l220.084,254.158c7.424,8.579,18.351,13.305,29.689,12.838 c11.334-0.465,21.837-6.073,28.532-15.229l61.273-83.834c1.457-1.991,3.661-3.313,6.106-3.656c2.445-0.343,4.925,0.313,6.877,1.828 c2.556,1.983,5.801,2.869,9.01,2.46c3.214-0.408,6.129-2.077,8.109-4.637l30.584-39.583c4.123-5.325,3.145-12.986-2.181-17.103 L458.649,128.364c-2.728-2.109-4.035-5.575-3.379-8.962l2.863-14.888c1.455-7.618-3.529-14.977-11.144-16.451L321.749,63.931 c-3.667-0.697-7.46,0.091-10.545,2.192c-3.084,2.101-5.21,5.339-5.907,9.007l-6.172,32.23c-0.933,4.913-5.639,8.166-10.562,7.302 l-45.278-7.824l-11.552,50.028L235.423,157.459z M503.321,387.475c-3.817,5.207-9.84,8.342-16.295,8.479s-12.606-2.737-16.642-7.776 l-89.18-111.686c-6.775-8.462-10.163-19.142-9.497-29.961l30.053,4.393c11.734,1.64,22.721,6.728,31.564,14.619l96.761,85.326 L503.321,387.475z M387.161,215.531l10.644-8.986c16.682-13.924,41.011-13.649,57.371,0.652l103.175,90.953 c3.554,3.125,4.13,8.443,1.338,12.26l-18.723,25.619l-95.483-84.143c-11.521-10.286-25.839-16.91-41.136-19.036l-27.805-4.1 c2.663-5.064,6.285-9.563,10.665-13.246L387.161,215.531z M311.973,184.949l38.638,41.023c3.443,3.676,3.26,9.45-0.412,12.9 c-0.515,0.491-1.082,0.914-1.7,1.266c-3.67,2.119-8.316,1.437-11.22-1.648l-38.639-41.018c-2.241-2.381-3.041-5.775-2.102-8.905 c0.941-3.127,3.478-5.521,6.661-6.272c3.18-0.749,6.519,0.254,8.761,2.631L311.973,184.949z M262.435,150.337 c3.611-3.524,9.395-3.458,12.921,0.152l12.913,13.22c3.526,3.615,3.453,9.402-0.159,12.925c-0.545,0.54-1.158,1.002-1.822,1.381 c-3.614,2.082-8.183,1.455-11.097-1.53l-12.883-13.206c-1.705-1.735-2.645-4.074-2.62-6.505c0.031-2.43,1.024-4.749,2.762-6.447 L262.435,150.337z'/%3E%3Cpath d='M14.731,337.001c12.243,0.422,24.115-4.257,32.781-12.923c8.666-8.662,13.344-20.534,12.919-32.781 c0-21.151-29.587-68.233-45.7-86.838c-16.105,18.593-45.704,65.675-45.704,86.838c-0.426,12.247,4.257,24.119,12.919,32.781 C-9.388,332.744,2.484,337.423,14.731,337.001z'/%3E%3C/svg%3E%0A"
                            : "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='512pt' viewBox='0 -1 512.12542 512' width='512pt'%3E%3Cpath d='m10.320312 49.855469 136.550782 40.226562c4.238281 1.242188 8.175781 3.347657 11.5625 6.179688l41.519531 34.589843 34.945313-37.488281-57.382813-46.625c-1.445313-1.175781-3.113281-2.054687-4.898437-2.578125l-147.804688-43.523437c-3.578125-1.054688-7.429688-.6445315-10.707031 1.140625-3.277344 1.785156-5.710938 4.796875-6.765625 8.378906l-6.527344 22.246094c-2.1875 7.441406 2.066406 15.253906 9.507812 17.453125zm0 0'/%3E%3Cpath d='m216.886719 144.949219c1.621093 1.351562 2.726562 3.222656 3.125 5.292969l63.535156 330.230468c2.140625 11.144532 9.242187 20.703125 19.296875 25.96875 10.050781 5.265625 21.953125 5.660156 32.332031 1.078125l95.003907-41.976562c2.257812-.996094 4.828124-1.039063 7.117187-.113281 2.289063.925781 4.109375 2.734374 5.042969 5.023437 1.222656 2.996094 3.589844 5.386719 6.574218 6.636719 2.988282 1.253906 6.347657 1.265625 9.34375.039062l46.289063-18.992187c6.234375-2.550781 9.21875-9.675781 6.664063-15.90625l-86.40625-210.84375c-1.308594-3.191407-.707032-6.847657 1.554687-9.453125l9.925781-11.464844c5.070313-5.871094 4.433594-14.738281-1.425781-19.824219l-96.417969-83.539062c-2.828125-2.4375-6.507812-3.652344-10.230468-3.375-3.722657.277343-7.183594 2.019531-9.621094 4.847656l-21.464844 24.832031c-3.265625 3.789063-8.96875 4.253906-12.800781 1.042969l-35.308594-29.421875-35.027344 37.558594zm117.027343 333.230469c-5.910156 2.601562-12.695312 2.304687-18.355468-.804688s-9.550782-8.675781-10.527344-15.058594l-21.394531-141.347656c-1.636719-10.71875.769531-21.664062 6.757812-30.703125l23.835938 18.835937c9.34375 7.289063 16.316406 17.191407 20.03125 28.449219l41.144531 122.304688zm-14.628906-207.039063 13.714844-2.460937c21.414062-3.71875 42.351562 8.6875 49.371094 29.257812l43.886718 130.386719c1.515626 4.484375-.644531 9.378906-4.972656 11.289062l-29.03125 12.828125-40.628906-120.640625c-4.835938-14.671875-13.925781-27.570312-26.113281-37.0625l-22.035157-17.457031c4.839844-3.054688 10.226563-5.140625 15.863282-6.140625zm-49.835937-64.09375 12.953125 54.859375c1.144531 4.90625-1.902344 9.816406-6.808594 10.96875-.691406.167969-1.394531.25-2.105469.246094-4.238281 0-7.921875-2.914063-8.894531-7.039063l-12.957031-54.855469c-.75-3.183593.253906-6.523437 2.632812-8.765624 2.378907-2.238282 5.773438-3.042969 8.90625-2.101563 3.128907.941406 5.519531 3.480469 6.273438 6.660156zm-25.601563-54.757813c4.890625-1.246093 9.867188 1.703126 11.117188 6.59375l4.574218 17.910157c1.246094 4.894531-1.710937 9.871093-6.601562 11.117187-.742188.195313-1.503906.289063-2.269531.285156-4.171875-.003906-7.816407-2.832031-8.847657-6.875l-4.554687-17.882812c-.609375-2.355469-.253906-4.851562.984375-6.945312 1.242188-2.089844 3.261719-3.601563 5.617188-4.203126zm0 0'/%3E%3C/svg%3E"
                        }
                      />
                    ) : (
                      <BuyButton
                        label={isOnBuy ? unplug : plug}
                        variant={BTN_VARIANT.primary}
                        iconLeftSize={80}
                        disabled={hasBuyDisabled}
                        color={colorSelected}
                        onClick={() => (isOnBuy ? stopBuy() : onBuy())}
                        iconLeftUrl={
                          isOnBuy
                            ? "data:image/svg+xml,%3Csvg version='1.1' id='Calque_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='300px' height='300px' viewBox='0 0 300 300' enable-background='new 0 0 300 300' xml:space='preserve'%3E%3Cpath d='M177.932,217.11c-24.867,24.864-65.181,24.864-90.045,0c-24.867-24.861-24.867-65.178,0-90.048'/%3E%3Cpath d='M202.121,224.262c4.704-4.71,4.704-12.336,0-17.046L97.781,102.879c-4.704-4.707-12.333-4.701-17.04,0l0,0 c-4.707,4.707-4.707,12.333,0,17.046l104.334,104.337C189.785,228.963,197.414,228.963,202.121,224.262L202.121,224.262z'/%3E%3Cpath d='M128.96,85.995c24.864-24.867,65.181-24.867,90.042,0c24.87,24.867,24.87,65.181,0,90.045'/%3E%3Cpath d='M104.771,78.849c-4.707,4.707-4.704,12.333,0,17.04l104.34,104.337c4.701,4.704,12.333,4.707,17.04,0l0,0 c4.707-4.701,4.707-12.336,0-17.043L121.814,78.849C117.107,74.142,109.481,74.142,104.771,78.849L104.771,78.849z'/%3E%3Cpath d='M143.8,98.546c4.707-4.707,12.333-4.707,17.04-0.003l0,0c4.704,4.71,4.704,12.339,0,17.046l-29.079,29.076l-17.043-17.037 L143.8,98.546z'/%3E%3Cpath d='M190.414,145.16c4.707-4.707,12.336-4.707,17.043,0l0,0c4.707,4.701,4.707,12.339,0,17.04l-29.076,29.082l-17.043-17.043 L190.414,145.16z'/%3E%3Cpath d='M246.161,41.796c4.71-4.707,12.339-4.707,17.043-0.003l0,0c4.704,4.71,4.707,12.339,0,17.046l-42.276,42.27l-17.04-17.037 L246.161,41.796z'/%3E%3Cpath d='M60.731,261.309c-4.707,4.713-12.336,4.713-17.043,0l0,0c-4.704-4.698-4.704-12.33,0-17.034l42.276-42.282l17.04,17.049 L60.731,261.309z'/%3E%3C/svg%3E%0A"
                            : "data:image/svg+xml,%3Csvg height='300px' width='300px' fill='%23000000' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' viewBox='0 0 100 100' enable-background='new 0 0 100 100' xml:space='preserve'%3E%3Cpath d='M48.644,81.37c-8.289,8.288-21.727,8.288-30.015,0c-8.289-8.287-8.289-21.726,0-30.016'%3E%3C/path%3E%3Cpath d='M56.707,83.754c1.568-1.57,1.568-4.112,0-5.682l-34.78-34.779c-1.568-1.569-4.111-1.567-5.68,0l0,0 c-1.569,1.569-1.569,4.111,0,5.682l34.778,34.779C52.595,85.321,55.138,85.321,56.707,83.754L56.707,83.754z'%3E%3C/path%3E%3Cpath d='M51.32,18.665c8.288-8.289,21.727-8.289,30.014,0c8.29,8.289,8.29,21.727,0,30.015'%3E%3C/path%3E%3Cpath d='M43.257,16.283c-1.569,1.569-1.568,4.111,0,5.68l34.78,34.779c1.567,1.568,4.111,1.569,5.68,0l0,0 c1.569-1.567,1.569-4.112,0-5.681L48.938,16.283C47.369,14.714,44.827,14.714,43.257,16.283L43.257,16.283z'%3E%3C/path%3E%3Cpath d='M40.6,38.182c1.569-1.569,4.111-1.569,5.68-0.001l0,0c1.568,1.57,1.568,4.113,0,5.682l-9.693,9.692l-5.681-5.679 L40.6,38.182z'%3E%3C/path%3E%3Cpath d='M56.138,53.72c1.569-1.569,4.112-1.569,5.681,0l0,0c1.569,1.567,1.569,4.113,0,5.68l-9.692,9.694l-5.681-5.681L56.138,53.72 z'%3E%3C/path%3E%3Cpath d='M90.387,3.932c1.57-1.569,4.113-1.569,5.681-0.001l0,0c1.568,1.57,1.569,4.113,0,5.682l-14.092,14.09l-5.68-5.679 L90.387,3.932z'%3E%3C/path%3E%3Cpath d='M9.577,96.103c-1.569,1.571-4.112,1.571-5.681,0l0,0c-1.568-1.566-1.568-4.11,0-5.678l14.092-14.094l5.68,5.683 L9.577,96.103z'%3E%3C/path%3E%3C/svg%3E"
                        }
                      />
                    )}
                  </Buy>
                )}
                {(errorTitle || errorMessage) && (
                  <Error redColor={redColor}>
                    <strong>{errorTitle}</strong>
                    <span>{errorMessage}</span>
                  </Error>
                )}
              </Column>
            </Line>
          </Fragment>
        ) : (
          <CloseShop />
        )}
      </Action>
    </Interface>
  );
};

export default GasStation;
